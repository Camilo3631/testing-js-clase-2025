name: 💅 Lint
on: push

defaults:
  run:
    working-directory: ./api  # Ajusta según dónde esté tu package.json

jobs: 
  lint:
    runs-on: macos-latest
    steps:
      # 1️⃣ Clonar el repositorio
      - name: 👍 Checkout
        uses: actions/checkout@v4

      # 2️⃣ Configurar Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      # 3️⃣ Instalar dependencias
      - name: 📥 Install Dependencies
        run: npm ci

      # 4️⃣ Listar archivos para debug
      - name: 🔍 List files
        run: ls -la

      # 5️⃣ Arreglar automáticamente errores que ESLint pueda corregir
      - name: 🌸 Fix ESLint issues
        run: npm run lint:fix || true

      # 6️⃣ Ejecutar ESLint y mostrar errores restantes, pero no falla
      - name: 🌹 Run ESLint (show errors, no fail)
        run: npm run lint || true
